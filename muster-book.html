from pathlib import Path

html = r"""<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wellen – Musterseite (Template)</title>
  <style>
    :root{
      --bg: #0b1220;
      --panel: rgba(255,255,255,0.06);
      --panel2: rgba(255,255,255,0.08);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.72);
      --line: rgba(255,255,255,0.12);
      --ok: #2ecc71;
      --bad:#ff5c5c;
      --accent:#66d9ef;
      --accent2:#a78bfa;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
      --radius2: 14px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(102,217,239,.22), transparent 55%),
        radial-gradient(900px 600px at 85% 20%, rgba(167,139,250,.18), transparent 55%),
        linear-gradient(180deg, #060b16, var(--bg));
      min-height:100vh;
    }

    .app{
      display:grid;
      grid-template-columns: 310px 1fr;
      gap: 18px;
      padding: 18px;
      max-width: 1250px;
      margin: 0 auto;
    }

    @media (max-width: 980px){
      .app{grid-template-columns: 1fr}
      .sidebar{position:relative; top:auto}
    }

    .sidebar{
      position: sticky;
      top: 18px;
      align-self: start;
      border: 1px solid var(--line);
      background: var(--panel);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .side-head{
      padding: 16px 16px 12px 16px;
      border-bottom: 1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,0.08), transparent);
    }

    .badge{
      display:inline-flex;
      gap:8px;
      align-items:center;
      font-size:12px;
      letter-spacing:.06em;
      text-transform:uppercase;
      color: var(--muted);
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: conic-gradient(from 180deg, var(--accent), var(--accent2), var(--accent));
      box-shadow: 0 0 0 2px rgba(255,255,255,0.06);
    }

    .side-title{
      margin: 10px 0 0 0;
      font-size: 18px;
      line-height: 1.15;
      font-weight: 760;
    }
    .side-sub{
      margin: 8px 0 0 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.35;
    }

    .nav{
      padding: 10px;
      display:flex;
      flex-direction:column;
      gap: 6px;
    }
    .nav a{
      text-decoration:none;
      color: var(--text);
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid transparent;
      background: transparent;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
    }
    .nav a:hover{
      background: var(--panel2);
      border-color: var(--line);
      transform: translateY(-1px);
    }
    .nav small{color: var(--muted); font-weight:600}

    .main{
      display:flex;
      flex-direction:column;
      gap: 14px;
    }

    .topbar{
      border: 1px solid var(--line);
      background: var(--panel);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px 16px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 12px;
    }
    .topbar h1{
      margin:0;
      font-size: 20px;
      font-weight: 780;
      letter-spacing: .01em;
    }
    .topbar .meta{
      color: var(--muted);
      font-size: 13px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }

    .block{
      border: 1px solid var(--line);
      background: var(--panel);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .block-head{
      padding: 16px 16px 12px 16px;
      border-bottom: 1px solid var(--line);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 14px;
    }
    .block-head h2{
      margin:0;
      font-size: 18px;
      font-weight: 780;
    }
    .block-head p{
      margin:6px 0 0 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.35;
      max-width: 70ch;
    }
    .block-body{
      padding: 16px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.04);
      color: var(--muted);
      font-size: 12px;
      font-weight: 650;
      user-select:none;
    }

    .row{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      align-items:center;
      margin-top: 10px;
    }

    .btn{
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-weight: 700;
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ background: rgba(255,255,255,0.09); transform: translateY(-1px); }
    .btn.primary{
      background: linear-gradient(135deg, rgba(102,217,239,.22), rgba(167,139,250,.22));
      border-color: rgba(255,255,255,0.16);
    }
    .btn:disabled{
      opacity:.55;
      cursor:not-allowed;
      transform:none;
    }

    .note{
      margin: 10px 0 0 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.4;
    }

    /* Multiple choice */
    .mcq{
      display:flex;
      flex-direction:column;
      gap: 12px;
    }
    .q{
      border: 1px solid var(--line);
      border-radius: var(--radius2);
      background: rgba(255,255,255,0.04);
      padding: 12px;
    }
    .q h3{
      margin:0 0 10px 0;
      font-size: 15px;
      font-weight: 760;
    }
    .choices{ display:flex; flex-direction:column; gap: 8px; }
    label.choice{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding: 8px 10px;
      border: 1px solid transparent;
      border-radius: 12px;
      background: rgba(255,255,255,0.03);
      cursor:pointer;
    }
    label.choice:hover{
      border-color: var(--line);
      background: rgba(255,255,255,0.05);
    }
    .choice input{ margin-top: 3px; }
    .q.correct{ border-color: rgba(46, 204, 113, 0.55); }
    .q.wrong{ border-color: rgba(255, 92, 92, 0.55); }
    .feedback{
      margin-top: 10px;
      font-size: 13px;
      color: var(--muted);
    }
    .score{
      margin-top: 8px;
      font-weight: 800;
      color: var(--text);
    }

    /* Drag cloze */
    .cloze{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    .bank{
      display:flex;
      flex-wrap:wrap;
      gap: 8px;
      padding: 10px;
      border: 1px dashed rgba(255,255,255,0.22);
      border-radius: var(--radius2);
      background: rgba(0,0,0,0.12);
      min-height: 52px;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.05);
      cursor: grab;
      user-select:none;
      font-weight: 720;
      font-size: 13px;
    }
    .chip:active{ cursor: grabbing; }
    .text{
      border: 1px solid var(--line);
      border-radius: var(--radius2);
      padding: 12px;
      background: rgba(255,255,255,0.03);
      line-height: 1.7;
      font-size: 15px;
    }
    .gap{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-width: 110px;
      padding: 4px 10px;
      margin: 0 3px;
      border-radius: 12px;
      border: 1px dashed rgba(255,255,255,0.25);
      background: rgba(255,255,255,0.03);
      vertical-align: baseline;
    }
    .gap.filled{
      border-style: solid;
      background: rgba(255,255,255,0.06);
    }
    .gap.ok{
      border-color: rgba(46, 204, 113, 0.65);
      box-shadow: 0 0 0 3px rgba(46,204,113,0.12);
    }
    .gap.bad{
      border-color: rgba(255,92,92,0.65);
      box-shadow: 0 0 0 3px rgba(255,92,92,0.10);
    }
    .drop-hint{
      color: var(--muted);
      font-size: 13px;
      margin: 6px 0 0 0;
    }

    /* Generic input blocks */
    .field{
      display:flex;
      flex-direction:column;
      gap:6px;
      margin-top: 8px;
    }
    textarea, input[type="text"]{
      width:100%;
      border-radius: 12px;
      border: 1px solid var(--line);
      padding: 10px 12px;
      background: rgba(255,255,255,0.04);
      color: var(--text);
      outline:none;
    }
    textarea{ min-height: 120px; resize: vertical; }
    .tiny{ font-size: 12px; color: var(--muted); }
    .hr{ height:1px; background: var(--line); margin: 14px 0; }
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="side-head">
        <div class="badge"><span class="dot"></span> Interaktives Heft – Muster</div>
        <div class="side-title">Wellen – Kapitelvorlage</div>
        <p class="side-sub">Vorlage mit wiederverwendbaren Bausteinen: Info-Block, Multiple Choice, Drag-&-Drop-Lückentext, Freitext mit Auto-Speichern.</p>
      </div>
      <nav class="nav">
        <a href="#kapitel-1"><span>Kapitel 1</span><small>Info</small></a>
        <a href="#quiz-1"><span>Multiple Choice</span><small>Check</small></a>
        <a href="#cloze-1"><span>Lückentext</span><small>Drag</small></a>
        <a href="#notizen"><span>Notizen</span><small>Save</small></a>
      </nav>
    </aside>

    <main class="main">
      <div class="topbar">
        <div>
          <h1>Wellen – Musterseite</h1>
          <div class="meta">Einzelne HTML-Datei, ohne externe Abhängigkeiten</div>
        </div>
        <div class="row">
          <span class="pill">Bausteine</span>
          <button class="btn" id="resetAllBtn" type="button">Alles zurücksetzen</button>
        </div>
      </div>

      <div class="grid">

        <!-- ===== Info / Arbeitsauftrag ===== -->
        <section class="block" id="kapitel-1">
          <div class="block-head">
            <div>
              <h2>Arbeitsauftrag (Musterblock)</h2>
              <p>Hier kommt später dein Inhalt hin. Der Block ist als wiederverwendbare „Karte“ gedacht (Überschrift + kurzer Hinweis + Body).</p>
            </div>
            <span class="pill">Info</span>
          </div>
          <div class="block-body">
            <ul>
              <li>Kurzer Auftrag 1 (Platzhalter)</li>
              <li>Kurzer Auftrag 2 (Platzhalter)</li>
              <li>Kurzer Auftrag 3 (Platzhalter)</li>
            </ul>
            <p class="note">Tipp: Du kannst jeden Block kopieren und nur die IDs/Überschriften ändern.</p>
          </div>
        </section>

        <!-- ===== Multiple Choice ===== -->
        <section class="block" id="quiz-1">
          <div class="block-head">
            <div>
              <h2>Multiple Choice (mit Überprüfung)</h2>
              <p>Unterstützt Single-Choice (Radio) und Multiple-Select (Checkbox). Richtige Antworten werden nach Klick auf „Überprüfen“ markiert.</p>
            </div>
            <span class="pill">Quiz</span>
          </div>
          <div class="block-body">
            <!-- Konfiguration: Du füllst nur das JSON -->
            <script type="application/json" class="mcq-config">
            {
              "title": "Wiederholung (Beispiel)",
              "questions": [
                {
                  "text": "Welche Aussage passt?",
                  "multiple": false,
                  "choices": [
                    {"id":"a","label":"Eine Welle transportiert Materie dauerhaft."},
                    {"id":"b","label":"Eine Welle transportiert Energie."},
                    {"id":"c","label":"Eine Welle ist immer sichtbar."}
                  ],
                  "correct": ["b"],
                  "explain": "Wellen transportieren Energie/Information; Teilchen schwingen meist um eine Ruhelage."
                },
                {
                  "text": "Kreuze alle richtigen Antworten an:",
                  "multiple": true,
                  "choices": [
                    {"id":"a","label":"Amplitude beschreibt die maximale Auslenkung."},
                    {"id":"b","label":"Frequenz ist die Anzahl Schwingungen pro Sekunde."},
                    {"id":"c","label":"Periode und Frequenz sind unabhängig voneinander."}
                  ],
                  "correct": ["a","b"],
                  "explain": "Es gilt f = 1/T. Periode und Frequenz hängen zusammen."
                }
              ]
            }
            </script>

            <div class="mcq" data-mcq></div>

            <div class="row">
              <button class="btn primary" type="button" data-mcq-check>Überprüfen</button>
              <button class="btn" type="button" data-mcq-reset>Zurücksetzen</button>
              <div class="score" data-mcq-score aria-live="polite"></div>
            </div>
          </div>
        </section>

        <!-- ===== Drag & Drop Lückentext ===== -->
        <section class="block" id="cloze-1">
          <div class="block-head">
            <div>
              <h2>Lückentext (Drag & Drop)</h2>
              <p>Wörter aus der Wortbank in die Lücken ziehen. Jede Lücke hat eine korrekte Lösung (data-answer). Mit „Überprüfen“ werden Lücken markiert.</p>
            </div>
            <span class="pill">Cloze</span>
          </div>

          <div class="block-body cloze" data-cloze>
            <!-- Wortbank: Du füllst die chips (data-token) -->
            <div class="bank" data-bank aria-label="Wortbank">
              <div class="chip" draggable="true" data-token="Energie">Energie</div>
              <div class="chip" draggable="true" data-token="Amplitude">Amplitude</div>
              <div class="chip" draggable="true" data-token="Frequenz">Frequenz</div>
              <div class="chip" draggable="true" data-token="Periode">Periode</div>
            </div>

            <div class="text" aria-label="Lückentext">
              Eine Welle transportiert <span class="gap" data-answer="Energie" aria-label="Lücke 1"></span>.
              Die <span class="gap" data-answer="Amplitude" aria-label="Lücke 2"></span> ist die maximale Auslenkung.
              Die <span class="gap" data-answer="Frequenz" aria-label="Lücke 3"></span> gibt Schwingungen pro Sekunde an.
              Die <span class="gap" data-answer="Periode" aria-label="Lücke 4"></span> ist die Dauer einer Schwingung.
              <div class="drop-hint">Hinweis: Klicke auf ein eingesetztes Wort, um es zurück in die Wortbank zu legen.</div>
            </div>

            <div class="row">
              <button class="btn primary" type="button" data-cloze-check>Überprüfen</button>
              <button class="btn" type="button" data-cloze-reset>Zurücksetzen</button>
              <div class="score" data-cloze-score aria-live="polite"></div>
            </div>
          </div>
        </section>

        <!-- ===== Freitext / Ergebnisspeicher ===== -->
        <section class="block" id="notizen">
          <div class="block-head">
            <div>
              <h2>Notizen / Ergebnisse</h2>
              <p>Freitextfelder speichern automatisch im Browser (LocalStorage). Ideal als „Ergebnisdatei“ pro Schülergerät.</p>
            </div>
            <span class="pill">Save</span>
          </div>
          <div class="block-body">
            <div class="field">
              <label for="name">Name</label>
              <input id="name" type="text" data-autosave="wellen_name" placeholder="Vorname Nachname" />
              <div class="tiny">Wird automatisch gespeichert.</div>
            </div>

            <div class="hr"></div>

            <div class="field">
              <label for="notes1">Ergebnisse (Beispiel)</label>
              <textarea id="notes1" data-autosave="wellen_notes1" placeholder="Schreibe hier deine Antworten / Beobachtungen..."></textarea>
              <div class="tiny">Tipp: Du kannst pro Aufgabe ein eigenes Feld anlegen (kopieren, data-autosave Key anpassen).</div>
            </div>

            <div class="row">
              <button class="btn" type="button" data-export>Als .txt exportieren</button>
              <button class="btn" type="button" data-clear-saved>Gespeichertes löschen</button>
              <div class="score" data-save-status aria-live="polite"></div>
            </div>
          </div>
        </section>

      </div>
    </main>
  </div>

  <script>
  // ===== Utilities =====
  const qs  = (sel, el=document) => el.querySelector(sel);
  const qsa = (sel, el=document) => Array.from(el.querySelectorAll(sel));

  // ===== Multiple Choice renderer =====
  function renderMCQ(container){
    const cfgEl = qs('.mcq-config', container.parentElement);
    const cfg = JSON.parse(cfgEl.textContent);

    container.innerHTML = '';
    cfg.questions.forEach((q, qi) => {
      const qEl = document.createElement('div');
      qEl.className = 'q';
      qEl.dataset.qi = String(qi);

      const h = document.createElement('h3');
      h.textContent = `${qi+1}. ${q.text}`;
      qEl.appendChild(h);

      const chWrap = document.createElement('div');
      chWrap.className = 'choices';

      const type = q.multiple ? 'checkbox' : 'radio';
      const name = `q_${qi}`;

      q.choices.forEach(c => {
        const label = document.createElement('label');
        label.className = 'choice';

        const inp = document.createElement('input');
        inp.type = type;
        inp.name = name;
        inp.value = c.id;
        inp.dataset.choice = c.id;

        const span = document.createElement('span');
        span.textContent = c.label;

        label.appendChild(inp);
        label.appendChild(span);
        chWrap.appendChild(label);
      });

      qEl.appendChild(chWrap);

      const fb = document.createElement('div');
      fb.className = 'feedback';
      fb.dataset.feedback = '1';
      fb.textContent = '';
      qEl.appendChild(fb);

      container.appendChild(qEl);
    });

    // Attach check/reset buttons in block
    const block = container.closest('.block');
    const checkBtn = qs('[data-mcq-check]', block);
    const resetBtn = qs('[data-mcq-reset]', block);
    const scoreEl  = qs('[data-mcq-score]', block);

    function check(){
      let correctCount = 0;

      qsa('.q', container).forEach(qEl => {
        qEl.classList.remove('correct','wrong');
        const qi = Number(qEl.dataset.qi);
        const q = cfg.questions[qi];

        const selected = qsa('input', qEl).filter(i => i.checked).map(i => i.value).sort();
        const expected = [...q.correct].sort();

        const ok = selected.length === expected.length && selected.every((v,i) => v === expected[i]);

        qEl.classList.add(ok ? 'correct' : 'wrong');

        const fb = qs('[data-feedback]', qEl);
        fb.textContent = q.explain ? q.explain : (ok ? 'Richtig.' : 'Nicht ganz.');
        if(ok) correctCount += 1;
      });

      scoreEl.textContent = `Punkte: ${correctCount}/${cfg.questions.length}`;
    }

    function reset(){
      qsa('input', container).forEach(i => i.checked = false);
      qsa('.q', container).forEach(qEl => {
        qEl.classList.remove('correct','wrong');
        const fb = qs('[data-feedback]', qEl);
        if(fb) fb.textContent = '';
      });
      scoreEl.textContent = '';
    }

    checkBtn.addEventListener('click', check);
    resetBtn.addEventListener('click', reset);

    return {check, reset};
  }

  // ===== Drag & Drop Cloze =====
  function initCloze(root){
    const bank = qs('[data-bank]', root);
    const gaps = qsa('.gap', root);
    const checkBtn = qs('[data-cloze-check]', root);
    const resetBtn = qs('[data-cloze-reset]', root);
    const scoreEl  = qs('[data-cloze-score]', root);

    function makeChip(token){
      const chip = document.createElement('div');
      chip.className = 'chip';
      chip.draggable = true;
      chip.dataset.token = token;
      chip.textContent = token;
      attachChipDnD(chip);
      chip.addEventListener('click', () => bank.appendChild(chip)); // click to return
      return chip;
    }

    function attachChipDnD(chip){
      chip.addEventListener('dragstart', (e) => {
        e.dataTransfer.setData('text/plain', chip.dataset.token);
        e.dataTransfer.setData('application/x-token-id', String(Date.now()) + Math.random());
        chip.classList.add('dragging');
        // Store a reference in global for move (safe enough for this template)
        window.__dragChip = chip;
      });
      chip.addEventListener('dragend', () => {
        chip.classList.remove('dragging');
        window.__dragChip = null;
      });
    }

    // Attach DnD to initial chips
    qsa('.chip', bank).forEach(chip => {
      attachChipDnD(chip);
      chip.addEventListener('click', () => bank.appendChild(chip));
    });

    function allowDrop(el){
      el.addEventListener('dragover', (e) => {
        e.preventDefault();
        el.style.borderColor = 'rgba(102,217,239,0.55)';
      });
      el.addEventListener('dragleave', () => {
        el.style.borderColor = '';
      });
      el.addEventListener('drop', (e) => {
        e.preventDefault();
        el.style.borderColor = '';
        const chip = window.__dragChip;
        if(!chip) return;

        // If gap already has a chip, return it to bank first
        const existing = qs('.chip', el);
        if(existing) bank.appendChild(existing);

        el.textContent = '';
        el.appendChild(chip);
        el.classList.add('filled');
        el.classList.remove('ok','bad');
      });
    }

    gaps.forEach(g => allowDrop(g));
    allowDrop(bank);

    function check(){
      let okCount = 0;
      gaps.forEach(g => {
        g.classList.remove('ok','bad');
        const expected = (g.dataset.answer || '').trim();
        const chip = qs('.chip', g);
        const got = chip ? (chip.dataset.token || '').trim() : '';
        const ok = got !== '' && got === expected;
        g.classList.add(ok ? 'ok' : 'bad');
        if(ok) okCount += 1;
      });
      scoreEl.textContent = `Punkte: ${okCount}/${gaps.length}`;
    }

    function reset(){
      // Return all chips to bank
      gaps.forEach(g => {
        const chip = qs('.chip', g);
        if(chip) bank.appendChild(chip);
        g.classList.remove('filled','ok','bad');
        g.textContent = ''; // keep empty visuals
      });

      // Restore placeholder look (empty but visible)
      gaps.forEach(g => {
        // keep a non-breaking space so the gap has height
        g.innerHTML = '&nbsp;';
      });

      // Rebuild bank order as initial (optional): keep as-is for simplicity
      scoreEl.textContent = '';
    }

    // Ensure gaps show as blank at start
    gaps.forEach(g => g.innerHTML = '&nbsp;');

    checkBtn.addEventListener('click', check);
    resetBtn.addEventListener('click', reset);

    return {check, reset};
  }

  // ===== Autosave (LocalStorage) =====
  function initAutosave(){
    const els = qsa('[data-autosave]');
    const status = qs('[data-save-status]');
    const setStatus = (t) => { if(status) status.textContent = t; };

    els.forEach(el => {
      const key = el.dataset.autosave;
      const saved = localStorage.getItem(key);
      if(saved !== null) el.value = saved;

      el.addEventListener('input', () => {
        localStorage.setItem(key, el.value);
        setStatus('Gespeichert.');
        window.clearTimeout(window.__saveTimer);
        window.__saveTimer = window.setTimeout(() => setStatus(''), 800);
      });
    });

    const exportBtn = qs('[data-export]');
    const clearBtn  = qs('[data-clear-saved]');
    if(exportBtn){
      exportBtn.addEventListener('click', () => {
        const lines = [];
        els.forEach(el => {
          const label = el.id ? (qs(`label[for="${el.id}"]`)?.textContent || el.id) : el.dataset.autosave;
          lines.push(`## ${label}\n${el.value}\n`);
        });
        const blob = new Blob([lines.join('\n')], {type:'text/plain;charset=utf-8'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'wellen-ergebnisse.txt';
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
      });
    }
    if(clearBtn){
      clearBtn.addEventListener('click', () => {
        els.forEach(el => {
          localStorage.removeItem(el.dataset.autosave);
          el.value = '';
        });
        setStatus('Gespeichertes gelöscht.');
        window.setTimeout(() => setStatus(''), 1200);
      });
    }
  }

  // ===== Init all =====
  const mcqStates = [];
  qsa('[data-mcq]').forEach(el => mcqStates.push(renderMCQ(el)));

  const clozeStates = [];
  qsa('[data-cloze]').forEach(el => clozeStates.push(initCloze(el)));

  initAutosave();

  // Reset all
  qs('#resetAllBtn').addEventListener('click', () => {
    mcqStates.forEach(s => s.reset());
    clozeStates.forEach(s => s.reset());
  });
  </script>
</body>
</html>
"""

out = Path("/mnt/data/wellen_template.html")
out.write_text(html, encoding="utf-8")
str(out)
